{"version":3,"sources":["webpack:////Users/potatow/Desktop/work/uniapp/BluetoothPrinter/main.js","webpack:////Users/potatow/Desktop/work/uniapp/BluetoothPrinter/pages/index/index.vue?730c","webpack:////Users/potatow/Desktop/work/uniapp/BluetoothPrinter/pages/index/index.vue?5324","webpack:////Users/potatow/Desktop/work/uniapp/BluetoothPrinter/pages/index/index.vue?ccb9","webpack:////Users/potatow/Desktop/work/uniapp/BluetoothPrinter/pages/index/index.vue?7896","webpack:////Users/potatow/Desktop/work/uniapp/BluetoothPrinter/pages/index/index.vue"],"names":["createPage","Page","tsc","require","esc","data","devices","currDev","connId","piaojuText","onLoad","methods","destroyed","console","log","uni","closeBLEConnection","deviceId","success","res","searchBle","that","openBluetoothAdapter","onDevice","getBluetoothAdapterState","available","discovering","stopFindBule","startBluetoothDevicesDiscovery","onBluetoothDeviceFound","JSON","stringify","re","parse","name","push","services","stopBluetoothDevicesDiscovery","onConn","item","createBLEConnection","complete","errMsg","setTimeout","getBLEServices","_deviceId","getBLEDeviceServices","serviceId","s","uuid","getBLEDeviceCharacteristics","c","characteristics","length","properties","write","index","characteristicId","fail","senBlData","uint8Array","uint8Buf","Array","from","split_array","datas","size","result","j","i","slice","sendloop","realWriteData","buffer","ArrayBuffer","dataView","DataView","setUint8","writeBLECharacteristicValue","value","senBleLabel","command","jpPrinter","createNew","setSize","setGap","setCls","setText","setQR","setPagePrint","getData","senBleLabel2","init","setPrintAndFeedRow"],"mappings":"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","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=dd95a064&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('dd95a064', component.options)\n    } else {\n      api.reload('dd95a064', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=dd95a064&\", function () {\n      api.rerender('dd95a064', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/potatow/Desktop/work/uniapp/BluetoothPrinter/pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=dd95a064&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\tvar tsc = require('../../components/gprint/tsc.js')\n\tvar esc = require('../../components/gprint/esc.js')\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tdevices: [],\n\t\t\t\tcurrDev: null,\n\t\t\t\tconnId: '',\n\t\t\t\tpiaojuText:'',\n\t\t\t}\n\t\t},\n\t\tonLoad: function() {\n\t\t\n\t\t},\n\n\t\tmethods: {\n\t\t\tdestroyed: function() {\n\t\t\t\tconsole.log(\"destroyed----------\")\n\t\t\t\tif (this.connId != '') {\n\t\t\t\t\tuni.closeBLEConnection({\n\t\t\t\t\t\tdeviceId: this.connId,\n\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t},\n\t\t\tsearchBle() {\n\t\t\t\tvar that = this\n\t\t\t\tconsole.log(\"initBule\")\n\t\t\t\tuni.openBluetoothAdapter({\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tconsole.log(\"打开 蓝牙模块\")\n\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\tthat.onDevice()\n\t\t\t\t\t\tuni.getBluetoothAdapterState({\n\t\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t\t\tif (res.available) {\n\t\t\t\t\t\t\t\t\tif (res.discovering) {\n\t\t\t\t\t\t\t\t\t\tthat.stopFindBule()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//搜索蓝牙\n\t\t\t\t\t\t\t\t\t//开始搜寻附近的蓝牙外围设备\n\t\t\t\t\t\t\t\t\tconsole.log(\"开始搜寻附近的蓝牙外围设备\")\n\t\t\t\t\t\t\t\t\tuni.startBluetoothDevicesDiscovery({\n\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tconsole.log('本机蓝牙不可用')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tonDevice(){\n\t\t\t\tconsole.log(\"监听寻找到新设备的事件---------------\")\n\t\t\t\tvar that = this\n\t\t\t\t//监听寻找到新设备的事件\n\t\t\t\tuni.onBluetoothDeviceFound(function(devices) {\n\t\t\t\t\t\t\tconsole.log('--------------new-----------------------'+JSON.stringify(devices))\n\t\t\t\t\t\t\tvar re = JSON.parse(JSON.stringify(devices))\n\t\t\t\t\t\t\tconsole.log(re.devices[0].name + \"  \" + re.devices[0].deviceId)\n\t\t\t\t\t\t\t\tlet name = re.devices[0].name\n\t\t\t\t\t\t\t\tif (name != \"未知设备\") {\n\t\t\t\t\t\t\t\t\tlet deviceId = re.devices[0].deviceId\n\t\t\t\t\t\t\t\t\tthat.devices.push({\n\t\t\t\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\t\t\t\tdeviceId: deviceId,\n\t\t\t\t\t\t\t\t\t\tservices: []\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\tstopFindBule() {\n\t\t\t\tconsole.log(\"停止搜寻附近的蓝牙外围设备---------------\")\n\t\t\t\tuni.stopBluetoothDevicesDiscovery({\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tonConn(item) {\n\t\t\t\tvar that = this\n\t\t\t\tconsole.log(\"连接蓝牙---------------\" + item.deviceId)\n\t\t\t\tlet deviceId = item.deviceId\n\t\t\t\tuni.createBLEConnection({\n\t\t\t\t\tdeviceId: deviceId,\n\t\t\t\t\tcomplete(res) {\n\t\t\t\t\t\tif (res.errMsg == \"createBLEConnection:ok\") {\n\t\t\t\t\t\t\tconsole.log(\"连接蓝牙-[\" + item.name + \"]--成功\")\n\t\t\t\t\t\t\tthat.connId = deviceId;\n\t\t\t\t\t\t\tthat.currDev = item\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\tthat.getBLEServices(deviceId)\n\t\t\t\t\t\t\t}, 2000)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//连接成功 关闭搜索\n\t\t\t\t\t\tthat.stopFindBule()\n\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t},\n\n\t\t\tgetBLEServices(_deviceId) {\n\t\t\t\tvar that = this;\n\t\t\t\tlet deviceId = _deviceId\n\t\t\t\tconsole.log(\"获取蓝牙设备所有服务(service)。---------------\")\n\n\t\t\t\tuni.getBLEDeviceServices({\n\t\t\t\t\t// 这里的 deviceId 需要已经通过 createBLEConnection 与对应设备建立链接\n\t\t\t\t\tdeviceId: deviceId,\n\t\t\t\t\tcomplete(res) {\n\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\tlet serviceId = \"\"\n\n\t\t\t\t\t\tfor (var s = 0; s < res.services.length; s++) {\n\t\t\t\t\t\t\tconsole.log(res.services[s].uuid)\n\t\t\t\t\t\t\tlet serviceId = res.services[s].uuid\n\t\t\t\t\t\t\tuni.getBLEDeviceCharacteristics({\n\t\t\t\t\t\t\t\t// 这里的 deviceId 需要已经通过 createBLEConnection 与对应设备建立链接\n\t\t\t\t\t\t\t\tdeviceId: deviceId,\n\t\t\t\t\t\t\t\t// 这里的 serviceId 需要在 getBLEDeviceServices 接口中获取\n\t\t\t\t\t\t\t\tserviceId: serviceId,\n\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\tvar re = JSON.parse(JSON.stringify(res))\n\n\t\t\t\t\t\t\t\t\tconsole.log('deviceId = [' + deviceId + ']  serviceId = [' + serviceId + ']')\n\t\t\t\t\t\t\t\t\tfor (var c = 0; c < re.characteristics.length; c++) {\n\t\t\t\t\t\t\t\t\t\tif (re.characteristics[c].properties.write == true) {\n\t\t\t\t\t\t\t\t\t\t\tlet uuid = re.characteristics[c].uuid\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(' deviceId = [' + deviceId + ']  serviceId = [' + serviceId + '] characteristics=[' +\n\t\t\t\t\t\t\t\t\t\t\t\tuuid)\n\n\t\t\t\t\t\t\t\t\t\t\tfor (var index in that.devices) {\n\t\t\t\t\t\t\t\t\t\t\t\tif (that.devices[index].deviceId == deviceId) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.devices[index].services.push({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: serviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: uuid\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(JSON.stringify(that.devices))\n\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t}\n\n\n\n\t\t\t\t\t},\n\t\t\t\t\tfail(res) {\n\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t},\n\t\t\t\t})\n\n\t\t\t},\n\t\t\tsenBlData(deviceId, serviceId, characteristicId,uint8Array) {\n\t\t\t\tconsole.log('************deviceId = [' + deviceId + ']  serviceId = [' + serviceId + '] characteristics=[' +characteristicId+ \"]\")\n\t\t\t\tvar uint8Buf = Array.from(uint8Array);\n\t\t\t\tfunction split_array(datas,size){\n\t\t\t\t\tvar result = {};\n\t\t\t\t\tvar j = 0\n\t\t\t\t\tfor (var i = 0; i < datas.length; i += size) {\n\t\t\t\t\t\tresult[j] = datas.slice(i, i + size)\n\t\t\t\t\t\tj++\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log(result)\n\t\t\t\t\treturn result\n\t\t\t\t}\n\t\t\t\tvar sendloop = split_array(uint8Buf, 20);\n\t\t\t\t// console.log(sendloop.length)\n\t\t\t\tfunction realWriteData(sendloop, i) {\n\t\t\t\t\tvar data = sendloop[i]\n\t\t\t\t\tif(typeof(data) == \"undefined\"){\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log(\"第【\" + i + \"】次写数据\"+data)\n\t\t\t\t\tvar buffer = new ArrayBuffer(data.length)\n\t\t\t\t\tvar dataView = new DataView(buffer)\n\t\t\t\t\tfor (var j = 0; j < data.length; j++) {\n\t\t\t\t\t\tdataView.setUint8(j, data[j]);\n\t\t\t\t\t}\n\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\tdeviceId,\n\t\t\t\t\t\tserviceId,\n\t\t\t\t\t\tcharacteristicId,\n\t\t\t\t\t\tvalue: buffer,\n\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\trealWriteData(sendloop, i + 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n               var i = 0;\n\t\t\t\trealWriteData(sendloop, i);\n\t\t\t},\n\t\t\tsenBleLabel() {\n\t\t\t\t//标签模式\n\t\t\t\tlet deviceId = this.currDev.deviceId;\n\t\t\t\tlet serviceId = this.currDev.services[0].serviceId;\n\t\t\t\tlet characteristicId = this.currDev.services[0].characteristicId;\n\t\t\t\tvar command = tsc.jpPrinter.createNew()\n\t\t\t\t// console.log(command)\n\t\t\t    command.setSize(40, 30)\n                command.setGap(2)\n                command.setCls()\n                command.setText(50, 10, \"TSS24.BF2\", 1, 1, \"打印测试\")\n                command.setQR(50, 50, \"L\", 5, \"A\", \"977767937@qq.com\")\n\t\t\t\tcommand.setPagePrint()\n\t\t\t\tthis.senBlData(deviceId, serviceId, characteristicId,command.getData())\n\t\t\t},\n\t\t\tsenBleLabel2(){\n\t\t\t\t//票据模式\n\t\t\t\tlet deviceId = this.currDev.deviceId;\n\t\t\t\tlet serviceId = this.currDev.services[0].serviceId;\n\t\t\t\tlet characteristicId = this.currDev.services[0].characteristicId;\n\t\t\t\tvar command = esc.jpPrinter.createNew()\n\t\t\t\tcommand.init()\n                command.setText(this.piaojuText);\n                command.setPrintAndFeedRow(1)\n\t\t\t\tthis.senBlData(deviceId, serviceId, characteristicId,command.getData())\n\t\t\t}\n\t\t}\n\t}\n"],"sourceRoot":""}